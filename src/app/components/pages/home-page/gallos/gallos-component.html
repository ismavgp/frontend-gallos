<div class="gallos-container">
    <div class="gallos-header">
        <h1 class="gallos-title">
            <mat-icon class="title-icon">pets</mat-icon>
            Mis Gallos
        </h1>
    </div>

    <div class="search-section">
        <app-search-component placeholder="Buscar por placa" [debounceTime]="400" appearance="outline" icon="search"
            (search)="onSearch($event)" (clear)="onClear()">
        </app-search-component>
    </div>


    <div class="actions-section">
        <app-button-component 
            text="Nuevo" 
            label="Agregar nuevo gallo" 
            appearance="raised" 
            color="primary" 
            icon="add"
            (click)="onAddNewGallo()">
        </app-button-component>
    </div>

    @if (loading()) {
    <div class="loading-message">
        <mat-icon class="loading-icon">autorenew</mat-icon>
        <p>Cargando gallos...</p>
    </div>
    }

    @if (!loading() && filteredGallos().length === 0) {
    <div class="empty-message">
        <mat-icon class="empty-icon">search_off</mat-icon>
        <h3>No se encontraron gallos</h3>
        <p>{{ searchTerm() ? 'Intenta con otro término de búsqueda' : 'Agrega tu primer gallo' }}</p>
    </div>
    }

    @if (!loading() && filteredGallos().length > 0) {
    <div class="content-section">
      @for (gallo of filteredGallos(); track gallo.placa) {
        <div class="gallo-card-wrapper">
          <button 
            mat-icon-button 
            class="delete-button" 
            color="warn"
            matTooltip="Eliminar gallo"
            (click)="onDeleteGallo($event, gallo)">
            <mat-icon>delete</mat-icon>
          </button>
          <div (click)="onGalloClick(gallo.placa)">
            <app-item-resume-component [gallo]="gallo" [showStats]="true"></app-item-resume-component>
          </div>
        </div>
      }
    </div>
    }
</div>
